
<!DOCTYPE html>
<html>
  <head>
    <title>
      JavaScript | Sending JSON data to server.
    </title>
  </head>
 
  <body style="text-align:center;" id="body">
    <h1 style="color:green;">
      Microservices test
    </h1>
 
    <p>
        <!-- Making a text input -->
        <label>Name</label>
        <input type="text" id="name" placeholder="Your name">
        <label>Email</label>
        <input type="email" id="email" placeholder="Email">
         
        <!-- Button to send data -->
        <button onclick="sendJSON()">Send JSON</button>
 
      <!-- For printing result from server -->
      <p class="result" style="color:green"></p>
     
   </p>
 
  <!-- Include the JavaScript -->
  <script>

  function sendJSON(){
              
            let result = document.querySelector('.result');
            let name = document.querySelector('#name');
            let email = document.querySelector('#email');
              
            // Creating a XHR object
            let xhr = new XMLHttpRequest();
            let url = "http://broker";
       
            // open a connection
            xhr.open("POST", url, true);
 
            // Set the request header i.e. which type of content you are sending
            xhr.setRequestHeader("Content-Type", "application/json");
 
            // Create a state change callback
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
 
                    // Print received data from server
                    result.innerHTML = this.responseText;
 
                }
            };
 
            // Converting JSON data to string
            var data = JSON.stringify({ "name": name.value, "email": email.value });
 
            // Sending data with the request
            xhr.send(data);
        }
  
  
  </script>
 
  </body>
</html>